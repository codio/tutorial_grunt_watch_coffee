@annotation:file index.html
This file references the compiled `.coffee` files. Take a look inside and near the bottom you'll see the references `.js` files, which are generated by Grunt.

@annotation:file source
This is where all `.coffee` files are located. These will get compiled by Grunt into the `compiled` folder.

@annotation:file compiled
Once Grunt has worked its magic, the compiled `.coffee` files get dumped in here.

@annotation:tour introduction
#Introduction

###Watch
The goal of this tutorial is to show you the `watch` tasks. This indispensible task simply watches your files and if any files change, your files get compiled immediately.

###Newer
However, we are also going to look at another cool Grunt tasks called `newer`. You can bolt this on so that tasks are only executed against files that have changed, rather than all files.

###Coffeescript
So that we have a nice, real world example to play with, we are going to use a really cool physics demo written in Coffescript. This has a lot of `.coffeescript` files that are going to need compiling whenever they change.

###Advanced Use Case
We are also going to show how our `watch` task can fire events that you can catch in your Gruntfile code.

@annotation:tour files
#Folders & Files
###Folders
This project contains a bunch of `.coffee` files in the `source` folder. These needs to be compiled to javascript before it will run in the browser. You will see the `compiled` folder where these files are generated. If you take a peek, you will see that for each file in the `source` directory, there will be a corresponding `.js` file, compiled by Grunt.

Don't worry about the `deploy` folder. It contains the physics engine this demo uses.

###Files
The only file that you really need to worry about is `index.html`. If you look on the left, you'll see we've highlighted the lines where the files are referenced.

###New to Grunt?
If you are new to Grunt, please review our main Grunt tutorial. This can be found at 

- [http://codio/codio/grunt-tutorial](http://codio/codio/grunt-tutorial)

@annotation:tour register
#Register Task Collections
We are going to register a collection of tasks. This is set up as `deafult`, so you can type `grunt` in the Console and this collection will run.

As you can see, it first cleans the `compiled` folder and then runs the `coffee` task which compiles all the files (as opposed to only files that change). Try it out!

We will also be able to run `grunt watch` which will execute the defined `watch` task directly. More on this shortly. it explains how we get it to compile only changed files.

@annotation:tour load
#Load Node Modules
We need to make sure that all node modules are correctly loaded.

@annotation:tour coffee
#Coffeescript compilation
So, this is where the actual Coffeescript compilation task is defined. We supply a couple of options

- `bare` - this is required to prevent the compiler wrapping everything in a function() wrapper. This demo fails if the compiler does this, so we disable it.
- `files` - you will find this option used in many modules. Read up on it [here in the Grunt docs](http://gruntjs.com/configuring-tasks#files).
- `files:expand` - this ensures that all subfolders get looked at properly.

@annotation:tour watch
#Watch for changed files
The obvious thing to do would be to configure our tasks with `tasks: ['coffee']`. This would work, but each time a single file was modified, it would recompile everything.

##The Easy Way
Our example shows the easy way to resolve this. We simply use as nifty node module [`grunt-newer`](https://npmjs.org/package/grunt-newer). This runs Grunt tasks with only those source files modified since the last successful run. 

So, we use `tasks: ['newer:coffee']`.

##Another, harder way
There is another way that you could accomplish the same thing. It is more complicated but it is worth mentioning as it draw attention to a powerful feature of Grunt - the ability to catch events.

    grunt.event.on('watch', function(action, filepath) {
      grunt.config(['jshint', 'all'], filepath);
    });

If you put this code just before your `grunt.loadNpmTasks()` code, it can catch task actions and then modify the behavior. The above example, for example, reconfigures a `jshint` task to contain the current file that has changed.

##Detailed Documentation
I recommend you read up more about this as it is beyond the scope of this tutorial. Try

- [grunt.config docs](http://gruntjs.com/api/grunt.config#grunt.config)
- [grunt-contrib-watch docs](https://npmjs.org/package/grunt-contrib-watch) and look for 'Using the watch event'.

@annotation:tour event
#Events
As explained in the Annotation Tour, you can trap events and modify tasks configurations on the fly (or simply output a message to the console as we have done here).

##Detailed Documentation
I recommend you read up more about this as it is beyond the scope of this tutorial, but well worth knowing about. Try

- [grunt.config docs](http://gruntjs.com/api/grunt.config#grunt.config)
- [grunt-contrib-watch docs](https://npmjs.org/package/grunt-contrib-watch) and look for 'Using the watch event'.


